# Cross configuration for cross-compilation
# This helps cross find system dependencies like OpenSSL

[target.aarch64-unknown-linux-gnu]
# Use the default cross Docker image which includes OpenSSL
# The image is automatically selected based on the target triple
image = "rustembedded/cross:aarch64-unknown-linux-gnu"

# Pre-build script to ensure OpenSSL is available
pre-build = [
    "apt-get update && apt-get install -y --no-install-recommends libssl-dev pkg-config"
]

[build]
# Pass through environment variables needed for OpenSSL
# cross will automatically handle PKG_CONFIG_ALLOW_CROSS
xargo = false

